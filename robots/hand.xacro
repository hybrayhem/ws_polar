<?xml version="1.0" encoding="utf-8"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="hand">
  <!-- safety_distance: Minimum safety distance in [m] by which the collision volumes are expanded and which is enforced during robot motions -->
  <xacro:macro name="hand" params="connected_to:='' ns:='' rpy:='0 0 0' xyz:='0 0 0'">
    <xacro:unless value="${connected_to == ''}">
      <joint name="${ns}_hand_joint" type="fixed">
        <parent link="${connected_to}"/>
        <child link="${ns}_hand"/>
        <origin xyz="${xyz}" rpy="${rpy}"/>
      </joint>
    </xacro:unless>
    <link name="${ns}_hand">
      <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/hand.dae"/>
        </geometry>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/hand.dae"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 0" xyz="0.006846 0.005366 -0.009625"/>
        <mass value="1.2773"/>
        <inertia ixx="0.0011" ixy="0.0" ixz="0.0" iyy="0.0006" iyz="0.0" izz="0.0015"/>
      </inertial>
    </link>

    <link name="${ns}_outer_l">
      <visual>
        <origin rpy="0 0 0" xyz="-0.025351 0.027594 0.004951"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/outer_l.dae"/>
        </geometry>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="-0.025351 0.027594 0.004951"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/outer_l.dae"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 0" xyz="0.006975 -0.006230 -0.004655"/>
        <mass value="0.0877"/>
        <inertia ixx="0.0" ixy="0.0" ixz="-0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
      </inertial>
    </link>

    <link name="${ns}_outer_r">
      <visual>
        <origin rpy="0 0 0" xyz="0.011889 0.027594 0.004951"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/outer_r.dae"/>
        </geometry>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0.011889 0.027594 0.004951"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/outer_r.dae"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 0" xyz="-0.007134 -0.006305 -0.004655"/>
        <mass value="0.0868"/>
        <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="-0.0" izz="0.0"/>
      </inertial>
    </link>

    <link name="${ns}_finger_l">
      <visual>
        <origin rpy="0 0 0" xyz="-0.061266 0.066842 0.004951"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/finger_l.dae"/>
        </geometry>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="-0.061266 0.066842 0.004951"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/finger_l.dae"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 0" xyz="0.006607 -0.028924 -0.004655"/>
        <mass value="0.7779"/>
        <inertia ixx="0.0009" ixy="0.0" ixz="-0.0" iyy="0.0003" iyz="0.0" izz="0.0009"/>
      </inertial>
    </link>

    <link name="${ns}_finger_r">
      <visual>
        <origin rpy="0 0 0" xyz="0.047804 0.066842 0.004951"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/finger_r.dae"/>
        </geometry>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0.047804 0.066842 0.004951"/>
        <geometry>
          <mesh filename="package://gtu_polar_arm_description/meshes/gripper/finger_r.dae"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 0" xyz="-0.006607 -0.028924 -0.004655"/>
        <mass value="0.7779"/>
        <inertia ixx="0.0009" ixy="0.0" ixz="0.0" iyy="0.0003" iyz="0.0" izz="0.0009"/>
      </inertial>
    </link>

    <joint name="${ns}_hand_joint2" type="continuous">
      <origin rpy="0 0 0" xyz="-0.011889 -0.027594 -0.004951"/>
      <parent link="${ns}_hand"/>
      <child link="${ns}_outer_r"/>
      <axis xyz="0.0 -0.0 -1.0"/>
      <mimic joint="${ns}_hand_joint1" multiplier="-1.0"/>
    </joint>

    <joint name="${ns}_hand_joint1" type="revolute">
      <origin rpy="0 0 0" xyz="0.025351 -0.027594 -0.004951"/>
      <parent link="${ns}_hand"/>
      <child link="${ns}_outer_l"/>
      <axis xyz="0.0 -0.0 -1.0"/>
      <limit effort="100" lower="-0.827286" upper="0.74002" velocity="100"/>
    </joint>

    <joint name="${ns}_finger_joint1" type="continuous">
      <origin rpy="0 0 0" xyz="0.035915 -0.039248 0.0"/>
      <parent link="${ns}_outer_l"/>
      <child link="${ns}_finger_l"/>
      <axis xyz="-0.0 -0.0 -1.0"/>
      <mimic joint="${ns}_finger_joint2"/>
    </joint>

    <joint name="${ns}_finger_joint2" type="continuous">
      <origin rpy="0 0 0" xyz="-0.035915 -0.039248 0.0"/>
      <parent link="${ns}_outer_r"/>
      <child link="${ns}_finger_r"/>
      <axis xyz="0.0 0.0 1.0"/>
      <mimic joint="${ns}_hand_joint1" multiplier="-1.0"/>
    </joint>
  </xacro:macro>    
</robot>
